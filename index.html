<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Lesson Booking App</title>

  <!-- Font Awesome (for icons) -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />

  <!-- Main CSS -->
  <link rel="stylesheet" href="style.cssS" />

  <!-- Vue.js (Vue 3 via CDN) -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
</head>
<body>
  <div id="app">
    <header class="header">
      <h1>Lesson Booking</h1>

      <button
        class="cart-toggle-btn"
        :disabled="cart.length === 0"
        @click="toggleCartView"
      >
        <i class="fa-solid fa-cart-shopping"></i>
        Cart ({{ totalItemsInCart }})
      </button>
    </header>

    <!-- LESSONS PAGE -->
    <main v-if="!showCart" class="main">
      <section class="controls">
        <div class="search-control">
          <label for="search">Search Lessons:</label>
          <input
            id="search"
            type="text"
            v-model="searchQuery"
            placeholder="Search by any field..."
          />
        </div>

        <div class="sort-control">
          <label>Sort by:</label>
          <select v-model="sortAttribute">
            <option value="subject">Subject</option>
            <option value="location">Location</option>
            <option value="price">Price</option>
            <option value="spaces">Spaces</option>
          </select>

          <label>Order:</label>
          <select v-model="sortOrder">
            <option value="asc">Ascending</option>
            <option value="desc">Descending</option>
          </select>
        </div>
      </section>

      <section class="lesson-list">
        <article
          class="lesson-card"
          v-for="lesson in sortedLessons"
          :key="lesson.id"
        >
          <div class="lesson-icon">
            <i :class="lesson.iconClass"></i>
          </div>
          <div class="lesson-info">
            <h2 class="lesson-subject">{{ lesson.subject }}</h2>
            <p class="lesson-location">
              <i class="fa-solid fa-location-dot"></i>
              {{ lesson.location }}
            </p>
            <p class="lesson-price">
              <i class="fa-solid fa-tag"></i>
              £{{ lesson.price.toFixed(2) }}
            </p>
            <p class="lesson-spaces">
              <i class="fa-solid fa-users"></i>
              Spaces left: {{ lesson.spaces }}
            </p>
          </div>
          <div class="lesson-actions">
            <button
              class="add-cart-btn"
              :disabled="lesson.spaces === 0"
              @click="addToCart(lesson)"
            >
              Add to Cart
            </button>
          </div>
        </article>

        <p v-if="sortedLessons.length === 0" class="no-results">
          No lessons match your search.
        </p>
      </section>
    </main>

    <!-- CART PAGE -->
    <main v-else class="main">
      <section class="cart-section">
        <h2>Your Cart</h2>

        <div v-if="cart.length === 0" class="empty-cart">
          Your cart is empty.
        </div>

        <div v-else>
          <table class="cart-table">
            <thead>
              <tr>
                <th>Subject</th>
                <th>Location</th>
                <th>Price</th>
                <th>Quantity</th>
                <th>Remove</th>
              </tr>
            </thead>
            <tbody>
              <tr v-for="item in cart" :key="item.lesson.id">
                <td>{{ item.lesson.subject }}</td>
                <td>{{ item.lesson.location }}</td>
                <td>£{{ item.lesson.price.toFixed(2) }}</td>
                <td>{{ item.quantity }}</td>
                <td>
                  <button
                    class="remove-btn"
                    @click="removeFromCart(item)"
                  >
                    Remove One
                  </button>
                </td>
              </tr>
            </tbody>
          </table>

          <p class="cart-total">
            Total items: {{ totalItemsInCart }} |
            Total cost: £{{ cartTotal.toFixed(2) }}
          </p>
        </div>
      </section>

      <!-- CHECKOUT SECTION -->
      <section class="checkout-section">
        <h2>Checkout</h2>

        <form @submit.prevent="checkout">
          <div class="form-group">
            <label for="name">Name (letters only)</label>
            <input
              id="name"
              type="text"
              v-model="name"
              placeholder="Your name"
            />
            <small v-if="name && !isNameValid" class="error">
              Name must contain letters and spaces only.
            </small>
          </div>

          <div class="form-group">
            <label for="phone">Phone (numbers only)</label>
            <input
              id="phone"
              type="text"
              v-model="phone"
              placeholder="Your phone number"
            />
            <small v-if="phone && !isPhoneValid" class="error">
              Phone must contain numbers only.
            </small>
          </div>

          <button
            class="checkout-btn"
            type="submit"
            :disabled="!canCheckout"
          >
            Checkout
          </button>

          <p v-if="orderSubmitted" class="success-message">
            Your order has been submitted successfully!
          </p>
        </form>
      </section>
    </main>
  </div>

  <!-- Main JS -->
  <script src="Coursework 1.Js"></script>
  
</body>
</html>

